# タスク完了時のチェックリスト

タスクを完了したら、以下のチェックリストに従って作業を完了させてください。

## 1. 動作確認

### 必須確認項目
- [ ] 変更したコードが正しく動作するか確認
- [ ] エラーが発生していないか確認
- [ ] ユーザーに動作確認を依頼（重要な変更の場合）

### 確認方法
```powershell
# アプリケーションを起動して動作確認
powershell -Command ".venv\Scripts\python.exe MAIN_APP.py"
```

## 2. コードの整合性チェック

- [ ] import文が正しいか確認
- [ ] 使用していないimport文がないか確認
- [ ] 変数名・メソッド名が一貫しているか確認
- [ ] コメントが日本語で記述されているか確認
- [ ] 絵文字を使用していないか確認

## 3. バックアップの確認

- [ ] バックアップが適切に作成されているか確認
  - backup/YYYY-MM-DD/ フォルダに保存されているか
- [ ] 3日前より古いバックアップは削除されているか確認

## 4. ドキュメントの更新

### for_claude/log.txt への記録
- [ ] 作業内容を `for_claude/log.txt` に追記
  - 実施した変更内容
  - 削減した行数
  - 発生した問題と解決方法
  - 次回への引継ぎ事項

**記録タイミング**: 
- 重要な作業を完了したとき
- 大きなタスクの途中でも、キリの良いところで追記
- セッション中断に備えて、こまめに記録

### CLAUDE.mdの更新（必要に応じて）
- [ ] プロジェクト固有の重要な仕様が判明した場合は追記
- [ ] 新しいコーディング規約が決まった場合は追記

## 5. Gitコミット（変更が大きい場合）

### コミット前の確認
```bash
# 変更内容の確認
git status
git diff

# 最近のコミットログを確認（コミットメッセージのスタイルを参考に）
git log --oneline -10
```

### コミット実行
```bash
# ステージング
git add .

# コミット（日本語でわかりやすく）
git commit -m "具体的な変更内容の説明"
```

### プッシュ（ユーザーから依頼があった場合のみ）
```bash
# 通常のpush
git push

# 初回push（upstream設定が必要な場合）
git push --set-upstream origin main
```

## 6. リファクタリング作業の場合の追加チェック

### 削減行数の記録
- [ ] 変更前の行数を記録
- [ ] 変更後の行数を記録
- [ ] 削減行数を計算して `for_claude/log.txt` に記録

### コマンド例
```powershell
# ファイルの行数確認
powershell -Command "Get-Content 'MAIN_APP.py' | Measure-Object -Line"
```

### モジュール分離の場合
- [ ] 新規作成したモジュールファイルの行数を記録
- [ ] MAIN_APP.pyの削減行数を記録
- [ ] 実質的な削減効果（新規行数 - 削減行数）を計算

## 7. エラー対応の場合

- [ ] エラーの原因を特定して記録
- [ ] 解決方法を `for_claude/log.txt` に記録
- [ ] 同じエラーが再発しないための対策を検討

## 8. 次回セッションへの引継ぎ

### for_claude/log.txtに記録すべき内容
- [ ] 現在の進捗状況（どこまで完了したか）
- [ ] 次回実施すべきタスク
- [ ] 注意事項・懸念点
- [ ] 参考情報（関連ファイル、行番号等）

## 9. テストの実施（可能な場合）

- [ ] モジュール内の単体テスト関数を実行
- [ ] 期待通りの結果が得られるか確認

```powershell
# テストの実行（該当モジュールがある場合）
powershell -Command ".venv\Scripts\python.exe _lib/_data_io.py"
```

## 10. 最終確認

- [ ] すべてのファイルが保存されているか確認
- [ ] 不要な一時ファイルが残っていないか確認
- [ ] ユーザーに作業完了を報告

## 注意事項

### 絶対に実行してはいけないこと
- テストなしでの大規模な変更
- バックアップなしでのファイル削除
- ユーザーの確認なしでのgit push
- 絵文字の使用（文字化けの原因）

### ユーザーに確認が必要な場合
- 重要なファイルの削除・変更
- 大規模なリファクタリング
- 動作が不明な部分の変更
- git pushの実行
